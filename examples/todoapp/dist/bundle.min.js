function __extends(t,o){function e(){this.constructor=t}for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r]);t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}function __decorate(t,o,e,r){var n,i=arguments.length,a=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,o,e,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(o,e,a):n(o,e))||a);return i>3&&a&&Object.defineProperty(o,e,a),a}function isSupported(t){return"function"==typeof t}function isArray(t){return Array.isArray(t)}function isArrayEmpty(t){return 0===t.length}function isFunction(t){return void 0!=t&&"function"==typeof t}function defineProp(t,o,e,r){var n={enumerable:!1,configurable:!0,set:r,get:e};Object.defineProperty(t,o,n)}function getKeys(t){return Object.keys(t)}function each(t,o,e){void 0===e&&(e=null);var r,n,i,a;if(isArray(t))for(r=0,n=t.length;r<n;r++)o.call(e,t[r],r,t);else for(i=getKeys(t),r=0,n=i.length;r<n;r++)a=i[r],o.call(e,a,t[a],t);return t}function matchPair(t,o){var e,r,n=getKeys(o),i=n.length;for(r=0;r<i;r++)if(e=n[r],o[e]!==t[e]||!(e in t))return!1;return!0}function map(t,o,e){void 0===e&&(e=null);var r,n=[];return each(t,function(t,i){(r=o.call(e,t,i))&&n.push(r)}),n}function filter(t,o,e){void 0===e&&(e=null);var r=[];return each(t,function(n,i){o.call(e,n,i,t)&&r.push(n)}),r}function filterOne(t,o,e){void 0===e&&(e=null);var r,n,i=t.length;for(r=0;r<i;r++)if(o.call(e,n=t[r],r,t))return n;return!1}function attr(t,o){t.__metadata__.push(o)}function validate(t){return function(o,e,r){if(!isFunction(t))throw TypeError("The @validate() decorator, applied to '"+e+"()', requires a valid validator function as parameter to be passed in.");var n=r.value;return r.value=function(o){this._validate(o,t)&&n.call(this,o)},r}}function collection(t,o){t.__metadata__=o}var App=function(){function t(){}return t.prototype.browserBoot=function(){return window.$Vessel=this,this.detectBrowserFeatures().loadContainer(),this},t.prototype.detectBrowserFeatures=function(){return window.$Vessel.can={WeakMap:isSupported(window.WeakMap)},this},t.prototype.loadContainer=function(){return this.container=window.$Vessel.can.WeakMap?new WeakMap:"Dev: WeakMap fallback - work in progress",this},t}(),AttribProxy=function(){function t(){this.data={}}return t.prototype.addAttribute=function(t){this.data[t]="",defineProp(this,t,function(){return this.data[t]},function(o){this.data[t]=o})},t}(),Model=function(){function t(){this._createProxy()}return t.prototype.set=function(t){for(var o in t)this.attr[o]=t[o]},t.prototype._createProxy=function(){if(isArrayEmpty(this.__metadata__))throw TypeError("Attempt to create a proxy with no metadata.");this.attr=new AttribProxy;for(var t=0,o=this.__metadata__;t<o.length;t++){var e=o[t];this.attr.addAttribute(e)}},t.prototype._validate=function(t,o){return o(t)},t.prototype._getClassName=function(){return this.constructor.name},t}();Model.prototype.__metadata__=[];var prefixAttr="attr",Collection=function(){function t(){}return t.prototype.add=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var e=this.getCollection(),r=this.getModel();try{e.push(new(r.bind.apply(r,[void 0].concat(t))))}catch(t){t instanceof TypeError&&(isArray(e)||console.error("TypeError: The collection '"+this.__metadata__+"' ("+typeof e+") must be an array."))}},t.prototype.find=function(t){return filterOne(this.getCollection(),function(o){return matchPair(o[prefixAttr],t)})},t.prototype.findAll=function(t){return filter(this.getCollection(),function(o){return matchPair(o[prefixAttr],t)})},t.prototype.pull=function(t){return map(this.getCollection(),function(o){return o[prefixAttr][t]})},t.prototype.sort=function(){},t.prototype.remove=function(){},t.prototype.removeById=function(){},t.prototype.update=function(){},t.prototype.save=function(){},t.prototype.fetch=function(){},t.prototype.willRetrieve=function(){return this},t.prototype.getCollection=function(){return this[this.__metadata__]},t}(),TodoModel=function(t){function o(o,e){var r=t.call(this)||this;return r.setAuthor(o),r.setBody(e),r}return __extends(o,t),o.prototype.getAuthor=function(){return this.attr.author},o.prototype.setAuthor=function(t){this.attr.author=t},o.prototype.getBody=function(){return this.attr.body},o.prototype.setBody=function(t){this.attr.body=t},o}(Model);__decorate([attr],TodoModel.prototype,"author",void 0),__decorate([attr],TodoModel.prototype,"body",void 0),__decorate([attr],TodoModel.prototype,"date",void 0),__decorate([validate(function(t){return t.length>=3&&t.length<=20||(console.warn("Author length must be greater than 3 characters or less than 20."),!1)})],TodoModel.prototype,"setAuthor",null),__decorate([validate(function(t){if(!(t.length>=0&&t.length<=120))throw TypeError("Body length must be less than 120 characters and must not be empty.");return!0})],TodoModel.prototype,"setBody",null);var TodoCollection=function(t){function o(){var o=t.call(this)||this;return o.todos=[],o}return __extends(o,t),o.prototype.getModel=function(){return TodoModel},o}(Collection);__decorate([collection],TodoCollection.prototype,"todos",void 0);var app=(new App).browserBoot();app.collection=new TodoCollection,app.collection.add("pedro!","body 1"),app.collection.add("javi!","body 2"),app.collection.add("fran!","body 3"),app.collection.add("jose!","body 4"),app.collection.add("javier!","body 4");