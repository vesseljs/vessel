{"version":3,"file":"bundle.js","sources":["../node_modules/@vessel/router/src/boot/RouterBoot.ts","../node_modules/@vessel/core/src/base/metadata/Metadata.ts","../node_modules/@vessel/core/src/base/metadata/MetadataManager.ts","../node_modules/@vessel/injector/src/Container.ts","../node_modules/@vessel/injector/src/decorators/get.ts","../node_modules/@vessel/injector/index.ts","../node_modules/@vessel/core/src/boot/ContainerLoader.ts","../node_modules/@vessel/core/Kernel.ts","../node_modules/@vessel/core/src/base/Vessel.ts","../node_modules/@vessel/core/src/base/model/Proxy.ts","../node_modules/@vessel/core/src/base/model/Model.ts","../node_modules/@vessel/core/src/base/controller/Controller.ts","../node_modules/@vessel/core/src/base/view/View.ts","../node_modules/@vessel/core/src/base/collection/Collection.ts","../node_modules/@vessel/core/src/boot/app/App.ts","../node_modules/@vessel/core/src/common/utils/utilities.ts","../node_modules/@vessel/core/index.ts","../node_modules/@vessel/router/src/decorators/route.ts","../node_modules/@vessel/decorators/src/bootable.ts","../node_modules/@vessel/decorators/src/attr.ts","../node_modules/@vessel/decorators/src/validate.ts","../node_modules/@vessel/decorators/src/collection.ts","../src/model/TodoModel.ts","../src/collection/TodoCollection.ts","../src/collection/ThirdCollection.ts","../src/collection/TestCollection.ts","../src/collection/FourthCollection.ts","../src/controller/TodoController.ts","../src/config/modules.ts","../src/main.ts"],"sourcesContent":["\n\nexport class RouterBoot {\n\n    public router;\n\n    public setup(namespace) {\n        namespace.router;\n    }\n\n}\n\n\n","export class Metadata {\n\n    public static MODEL_ATTRIBUTES_KEY = 'attributes';\n\n    public static COLLECTION_ATTRIBUTE_KEY = 'collection';\n\n    public static DEPENDENCIES_KEY = 'dependencies';\n\n}","import { Metadata } from '@vessel/core';\n\n/**\n * class MetadataManager.\n *\n * Provides a way to store/retrieve\n * metadata info. about classes.\n *\n * e.g. Which attributes are being used\n * by the model, what is the name of\n * the attribute in the collection which\n * is the model array or what are the\n * dependencies of a class.\n *\n */\nexport class MetadataManager {\n\n    /**\n     * Metadata container\n     * for the loaded classes.\n     */\n    private cache = {};\n\n    /**\n     * Setter/getters for\n     * built-in decorators.\n     */\n\n    public getDependencies(className) {\n        return this.retrieve(className, Metadata.DEPENDENCIES_KEY);\n    }\n\n    public setDependency(className, dep) {\n        this.createOrPush(className, Metadata.DEPENDENCIES_KEY, dep);\n        return this;\n    }\n\n    public getAttributes(className) {\n        return this.retrieve(className, Metadata.MODEL_ATTRIBUTES_KEY);\n    }\n\n    public setAttribute(className, attrName) {\n        this.createOrPush(className, Metadata.MODEL_ATTRIBUTES_KEY, attrName);\n        return this;\n    }\n\n    public getCollection(className) {\n        return this.retrieve(className, Metadata.COLLECTION_ATTRIBUTE_KEY);\n    }\n\n    public setCollection(className, attrName) {\n        this.loadClass(className)[Metadata.COLLECTION_ATTRIBUTE_KEY] = attrName;\n        return this;\n    }\n\n    /**\n     * Setter for add any kind of metadata,\n     * so any dev can use decorators\n     * which need metadata without\n     * re-coding the core\n     */\n    public addMetadata(className, key, value) {\n        this.loadClass(className)[key] = value;\n        return this;\n    }\n\n    /**\n     * Getter for the setter right above.\n     */\n    public getMetadata(className, key) {\n        return this.retrieve(className, key);\n    }\n\n    /**\n     * Checks if a given\n     * className is\n     * cached.\n     */\n    private has(className) {\n        return this.cache.hasOwnProperty(className);\n    }\n\n    /**\n     * Returns the class if it\n     * exists or creates and returns\n     * it if it doesn't.\n     */\n    private loadClass(className) {\n        if (!this.has(className)) {\n            this.cache[className] = {}\n        }\n        return this.cache[className];\n    }\n\n    /**\n     * Retrieves the information\n     * of metadata if it was\n     * set before.\n     */\n    private retrieve(className, key) {\n        if (!this.has(className)) {\n            return undefined;\n        }\n\n        return this.cache[className][key];\n    }\n\n    private createOrPush(className, key, value) {\n        let cached = this.loadClass(className);\n\n        if (!cached.hasOwnProperty(key)) {\n            cached[key] = [];\n        }\n\n        cached[key].push(value);\n        return value;\n    }\n\n}","import { getKeys, each, findItem, merge } from '@vessel/core';\n\n/**\n *\n * Limitations:\n *\n * - You can't use a injected property by\n * @get decorator within constructor or a method\n * called immediately within the constructor. But you\n * can always use this.get() or this.container.get()\n * within constructor. That is, because @get decorator\n * adds the dependencies but it doesn't inject them,\n * the dependencies are resolved when the module is\n * started from the container with a .get() or when\n * the module is a dependency of a module which is being\n * started with the container method .get(). That said,\n * using the container method .get() returns the dependency\n * immediately.\n */\nexport class Container {\n\n    private modules = {};\n\n    private cache = new WeakMap();\n\n    public register(opts) {\n        merge(this.modules, opts);\n        return this;\n    }\n\n    public registerSingleModule(name, module)Â {\n\n        if (!module) {\n            throw TypeError(\"Cannot registerSingleModule(name, module). 'module' was \" + module);\n        }\n\n        let modules = this.modules;\n\n        if (!modules.hasOwnProperty(\"@\")) {\n            modules[\"@\"] = {}\n        }\n\n        modules[\"@\"][name] = module;\n\n        return this;\n    }\n\n    /**\n     * Gets a given module name.\n     */\n    public get(name) {\n        return this.resolveDependencies(name);\n    }\n\n    /**\n     * Gets the dependencies of a given className.\n     *\n     * At this time, metadataManager cannot be loaded by\n     * container.get(). That is, because the container.get()\n     * of the injector needs the MetadataManager to get the\n     * dependencies, so we manually load the dependency\n     * @metadata_manager (which is already registered\n     * within ContainerLoader) avoiding an unkind infinite loop :)\n     */\n    private getDependencies(className) {\n        let metadataConstructor = this.modules['@']['@metadata_manager'],\n            metadataManager = this.loadModule(metadataConstructor);\n        return metadataManager.getDependencies(className);\n    }\n\n    /**\n     * Resolves dependencies for a given module, recursively\n     * injecting its dependencies.\n     */\n    private resolveDependencies(name) {\n        let constructor = this.findModuleByName(name);\n\n        if (!constructor) {\n            throw new TypeError(\"Attempt to get \" +\n                \"non-existent module: '\" +\n                name +\"'. Did you register it?\");\n        }\n\n        let dependencies = this.getDependencies(constructor.name),\n            topParent = {\n                name: name,\n                constructor: constructor\n            };\n\n        each(dependencies, function(item){\n            this.inject(item.depName, item.attrName, topParent);\n        }, this);\n\n        return this.loadModule(constructor);\n    }\n\n    /**\n     * The purpose of this function is to\n     * get a @get('registrated_module_name') injected.\n     *\n     * All children dependencies are recursively resolved.\n     *\n     * The top parent of each container.inject() is\n     * the very first dependency.\n     *\n     * e.g. For a @get('module.name') the very first\n     * dependency is 'module.name', which will be injected\n     * to an instantiated constructor passed in as the\n     * 'constructor' parameter.\n     *\n     * @param depName is the current dependency name.\n     * @param attrName is the current attribute name to be injected on.\n     * @param topParent is an object with the name and constructor of\n     * the topParent dependency (not the module where we are injecting).\n     * @param parents is an array with the dependencies for a single @get().\n     * @param constructor is where the first dep will be injected.\n     *\n     */\n    private inject(depName, attrName, topParent, parents=[], constructor=null) {\n        let depConstructor = this.findModuleByName(depName);\n\n        if (!depConstructor) {\n            throw new TypeError(\"Attempt to inject \" +\n                \"non-existent dependency: '\" +\n                depName +\"'. Did you register it?\");\n        }\n\n        if (this.isCircular(depName, parents, topParent.name)) {\n            throw new RangeError(\"Circular dependency detected: \"+\n                \"module injection was impossible. Attempting to \"+\n                \"inject '\" + depName + \"' which have tried to \"+\n                \"resolve a parent dependency.\");\n        }\n\n        let depDependencies = this.getDependencies(depConstructor.name);\n\n        parents.push(depName);\n\n        each(depDependencies, function(dep) {\n            this.inject(dep.depName, dep.attrName, topParent, parents, depConstructor);\n        }, this);\n\n        // Only the top-parent dependency enters here.\n\n        if (parents.length === 1) {\n            // Inject the very first parent dependency\n            // to the module prototype.\n            let topParentInstance = this.loadModule(topParent.constructor),\n                topDependencyInstance = this.loadModule(depConstructor);\n            return topParentInstance[attrName] = topDependencyInstance;\n        }\n\n        // Children dependencies enter here.\n\n        parents.pop();\n        // Inject the dependency to the parent prototype.\n            let topDepInstance = this.loadModule(constructor),\n                depInstance = this.loadModule(depConstructor);\n        return topDepInstance[attrName] = depInstance;\n    }\n\n    /**\n     * Loads a module by its constructor,\n     * if it's already instantiated it will\n     * return the instance, otherwise it will\n     * instantiate and then return it.\n     */\n    private loadModule(constructor) {\n        let cache = this.cache;\n\n        if (!cache.has(constructor))\n            cache.set(constructor, new constructor());\n\n        return cache.get(constructor);\n    }\n\n    /**\n     * Find a module by its name, when a\n     * match is found, the loop stops.\n     *\n     * Returns the constructor if a module\n     * is found.\n     */\n    private findModuleByName(queryName) {\n        let modules = this.modules,\n            keys = getKeys(modules),\n            len = keys.length;\n        for (let i = 0; i < len; i++) {\n            let moduleType = keys[i],\n                module = modules[moduleType];\n            if (module && module.hasOwnProperty(queryName))\n                return modules[moduleType][queryName];\n        }\n        return null;\n    }\n\n    private isCircular(depName, parents, topParentName) {\n        return depName === topParentName || findItem(parents, depName);\n    }\n}","import { Vessel } from '@vessel/core';\n\n/**\n * Decorator: @get(moduleName)\n *\n * Uses the @metadata_manager service\n *\n *\n * @param depName\n */\n/*\nexport function get(depName) {\n    return function(proto, attrName) {\n        let className = proto.getClassName(),\n            key = \"__dependencies__\" + className + \"__\";\n        if (!proto.hasOwnProperty(key)) {\n            proto[key] = [];\n        }\n        proto[key].push({\n            attrName: attrName,\n            depName: depName\n        });\n    }\n}*/\n\nexport function get(depName) {\n    return function(proto, attrName) {\n        let metadataManager = Vessel.prototype.container.get('@metadata_manager'),\n            className = proto.getClassName();\n\n        metadataManager.setDependency(className, {\n            attrName: attrName,\n            depName: depName\n        });\n    }\n}","// Boot\nexport { Container } from './src/Container';\n\n// Decorators\nexport { get } from './src/decorators/get';","import { MetadataManager } from '@vessel/core';\nimport { Container } from '@vessel/injector';\n\n/**\n * Loads the injector Container\n * and registers the MetadataManager\n * so the injector is ready to use.\n *\n * It is needed to use decorators which\n * use metadata and to inject dependencies.\n */\nexport class ContainerLoader {\n\n    public constructor() {\n        this.boot();\n    }\n\n    public boot() {\n        return this.registerTo(new Container());\n    }\n\n    private registerTo(container) {\n        return container.registerSingleModule('@metadata_manager', MetadataManager);\n    }\n\n}","import {Vessel, each } from '@vessel/core';\n\n/**\n * Heart of the Vessel System.\n *\n * Manages the packages, services,\n * injector and configuration.\n */\nexport class Kernel {\n\n    private app;\n\n    public constructor(app) {\n        this.app = app;\n    }\n\n    public boot() {\n        this.setGlobals();\n        this.init();\n    }\n\n    public setGlobals() {\n        window[this.app.getGlobalName()] = this.app;\n    }\n\n    private getContainer() {\n        return Vessel.prototype.container;\n    }\n\n    private setAppContainer(container) {\n        this.app.container = container;\n    }\n\n    private registerDependencies(container) {\n        let registrations = this.app.registerModules();\n        container.register(registrations);\n        return this;\n    }\n\n    private bootPackages() {\n        let bootPackages = this.app.registerPackages();\n        this.loadPackages([bootPackages]);\n    }\n\n    private loadPackages(arr) {\n        each(arr, function(pkgs) {\n           each(pkgs, function(pkg){\n               pkg.setup(this.app);\n           }, this);\n        }, this);\n        return this;\n    }\n\n    private init() {\n        this.bootPackages();\n\n        let container = this.getContainer();\n\n        if (!container) {\n            throw new Error(\"Cannot register dependencies without \" +\n                \"the injector package.\");\n        }\n\n        this.registerDependencies(container)\n            .setAppContainer(container);\n    }\n\n}","import { ContainerLoader } from \"@vessel/core\";\n/**\n * Vessel's Main class.\n *\n * Models, views, collections\n * will inherit this class.\n */\nexport class Vessel {\n\n    public container;\n\n    protected getClassName(): string {\n        return this.constructor.name;\n    }\n\n    protected get(module) {\n        return this.container.get(module);\n    }\n}\n\nVessel.prototype.container = new ContainerLoader().boot();","import { defineProp } from '@vessel/core';\n\n/**\n * Attribute proxy.\n *\n * Intercepts each setter/getter of\n * each model's attribute so it can\n * trigger events.\n */\nexport class AttribProxy {\n\n    /**\n     * Stores the state of the\n     * model's attributes.\n     *\n     * @type {any{} }\n     */\n    public data = <any>{};\n\n    /**\n     * Setups a new attribute, installs\n     * the getter and setter interceptors.\n     *\n     * @param name\n     */\n    public addAttribute( name: string ) {\n        this.data[name] = \"\";\n        defineProp(this, name,\n            function getter() {\n                return this.data[name];\n            },\n            function setter( value ) {\n                this.data[name] = value;\n            }\n        )\n    }\n\n}","import { AttribProxy } from './Proxy';\nimport { Vessel, isArrayEmpty, each, toInitialUpperCase } from '@vessel/core';\nimport { ModelInterface } from '@vessel/types/definitions';\n\n/**\n * BaseModel class\n */\nexport class Model extends Vessel implements ModelInterface {\n\n    /**\n     * Stores the attribute proxy.\n     */\n    protected attr: any;\n\n    public constructor() {\n        super();\n        this._createProxy();\n    }\n\n    /**\n     * Provides a way to set multiple\n     * attributes at once.\n     *\n     * @param attrs\n     */\n    public set( attrs ) {\n        each(attrs, function(attrName, value){\n            let boundFn = this['set' + toInitialUpperCase(attrName)];\n            boundFn.call(this, value);\n        }, this);\n        return this;\n    }\n\n    /**\n     * Instances the attribute proxy, it adds each\n     * attribute defined in the model with the\n     * 'attr' decorator to the proxy.\n     * @private\n     */\n    protected _createProxy() {\n        let attrs,\n            metadaManager = this.get('@metadata_manager');\n\n        attrs = metadaManager.getAttributes(this.getClassName());\n\n        if ( isArrayEmpty(attrs) ) {\n            throw TypeError(\"Attempt to create a proxy\" +\n                \" with no metadata.\");\n        }\n\n        this.attr = new AttribProxy();\n\n        each(attrs, function(attrName) {\n            this.attr.addAttribute(attrName);\n        }, this);\n    }\n\n    /**\n     * Whenever a validation takes place, this\n     * function will be invoked. All built-in\n     * general validations will be checked here.\n     *\n     * This function is responsible for return\n     * the results of the custom defined\n     * validationFn.\n     *\n     * @param value\n     * @param validationFn\n     * @returns boolean\n     * @private\n     */\n    protected _validate( value, validationFn ) {\n        return validationFn(value);\n    }\n\n    public save() {\n\n    }\n\n    public fetch() {\n\n    }\n\n}","import { Vessel } from '@vessel/core';\n\nexport class Controller extends Vessel {\n\n    public render() {\n\n    }\n\n    public renderRoute() {\n\n    }\n\n\n}","import { Vessel } from \"@vessel/core\";\n\nexport class View extends Vessel {\n\n}\n","import { Vessel, isArray, filterOne, filter, matchPair, map } from '@vessel/core';\nimport { ModelInterface } from '@vessel/types/definitions';\n\nlet prefixAttr = 'attr';\n\nexport abstract class Collection extends Vessel {\n\n    public collection: ModelInterface[];\n    public model;\n\n    public add(...args) {\n        let collection = this.getCollection(),\n            Model = this.model;\n        try {\n            collection.push(new Model(...args));\n        } catch(e) {\n            if (e instanceof TypeError) {\n                if ( !isArray(collection) ) {\n                    console.error(\"TypeError: The collection '\" +\n                        collection+ \"' (\" + typeof collection +\n                        \") must be an array.\");\n                }\n            }\n        }\n    }\n\n    public find(attrs) {\n        return filterOne(this.getCollection(), function(item){\n            return matchPair(item[prefixAttr], attrs);\n        });\n    }\n\n    public findAll(attrs) {\n        return filter(this.getCollection(), function(item){\n            return matchPair(item[prefixAttr], attrs);\n        });\n    }\n\n    public pull(attrName) {\n        return map(this.getCollection(), function(item){\n            return item[prefixAttr][attrName];\n        });\n    }\n\n    public sort() {\n\n    }\n\n    public remove() {\n\n    }\n\n    public removeById() {\n\n    }\n\n    public save() {\n\n    }\n\n    public fetch() {\n\n    }\n\n    protected willRetrieve() {\n        return this;\n    }\n\n    protected getCollection() {\n        let name,\n            metadataManager = this.get('@metadata_manager');\n\n         name = metadataManager.getCollection(this.getClassName());\n\n        return this[name];\n    }\n\n}","import { isSupported } from '@vessel/core';\nimport { AppInterface } from '@vessel/types/definitions';\n\nexport abstract class BaseApp implements AppInterface {\n\n\tpublic can;\n\n\tpublic constructor() {\n\t\tthis.browserBoot();\n\t}\n\n\tpublic browserBoot(): AppInterface {\n\t\tthis.detectBrowserFeatures();\n\t\treturn this;\n\t}\n\n\tprivate detectBrowserFeatures(): AppInterface {\n\t\tthis.can = {\n\t\t\tWeakMap: isSupported( (<any>window).WeakMap )\n\t\t};\n\t\treturn this;\n\t}\n\n\tpublic abstract getGlobalName();\n\tpublic abstract registerModules();\n\tpublic abstract registerPackages();\n\n}\n","export function getDate() {\n\tconsole.log('Get date!');\n}\n\nexport function checkDate() {\n\tconsole.log('checkDate!');\n}\n\nexport function isSupported( feature ) {\n\treturn typeof feature == 'function';\n}\n\nexport function isArray( arr ) {\n    return Array.isArray(arr);\n}\n\nexport function isArrayEmpty( arr ) {\n    if (!arr) return true;\n    if (arr.length === 0) return true;\n    return false;\n}\n\nexport function findItem( arr, value ) {\n    return arr.indexOf(value) !== -1\n}\n\nexport function isFunction( fn ) {\n    if ( fn == undefined ) return false;\n    if ( typeof fn !== \"function\" ) return false;\n    return true;\n}\n\nexport function isObject(exp: any) {\n    return typeof exp === \"object\";\n}\n\nexport function toInitialUpperCase( string ) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport function defineProp( obj, prop, getter, setter ) {\n    let descriptor = {\n        enumerable: false,\n        configurable: true,\n        set: setter,\n        get: getter\n    }\n    Object.defineProperty( obj, prop, descriptor );\n}\n\nexport function getKeys(obj) {\n    return Object.keys(obj);\n}\n\nexport function each(obj, fn, context=null) {\n    var i, len, keys, item, result;\n    if (!obj) return;\n    if (isArray(obj)) {\n        for (i = 0, len = obj.length; i < len; i++) {\n            result = fn.call(context, obj[i], i, obj);\n        }\n    } else {\n        keys = getKeys(obj);\n        for (i = 0, len = keys.length; i < len; i++) {\n            item = keys[i];\n            result = fn.call(context, item, obj[item], obj);\n        }\n    }\n    return result;\n}\n\nexport function matchPair(obj, attrs) {\n    var keys = getKeys(attrs),\n        len = keys.length,\n        key, i;\n    for (i = 0; i < len; i++) {\n        key = keys[i];\n        if (attrs[key] !== obj[key] || !(key in obj))\n            return false;\n    }\n    return true;\n}\n\nexport function map(arr, fn, context=null) {\n    var newArr = [], result;\n    each(arr, function(item, index) {\n        result = fn.call(context, item, index);\n        if ( result ) newArr.push(result);\n    });\n    return newArr;\n}\n\nexport function filter(obj, fn, context=null) {\n    var matches = [];\n    each(obj, function(item, index) {\n        if (fn.call(context, item, index, obj))\n            matches.push(item);\n    });\n    return matches;\n}\n\nexport function filterOne(arr, fn, context=null) {\n    var i, item, len = arr.length;\n    for (i = 0; i < len; i++) {\n        if (fn.call(context, item = arr[i], i, arr))\n            return item;\n    }\n    return false;\n}\n\nexport function merge(obj, obj2) {\n    let prop;\n    for (prop in obj2) {\n        try {\n            obj[prop] = isObject(obj2[prop]) ? merge(obj[prop], obj2[prop]) : obj2[prop];\n        } catch (e) {\n            obj[prop] = obj2[prop];\n        }\n    }\n}","// Base\nexport { Metadata } from './src/base/metadata/Metadata';\nexport { MetadataManager } from './src/base/metadata/MetadataManager';\nexport { ContainerLoader } from './src/boot/ContainerLoader';\n\nexport { Kernel } from './Kernel';\n\n\nexport { Vessel } from './src/base/Vessel';\n\nexport { Http } from './src/services/http/Http';\nexport { Storage } from './src/services/storage/Storage';\nexport { Model } from './src/base/model/Model';\nexport { Controller } from './src/base/controller/Controller';\nexport { View } from './src/base/view/View';\nexport { Collection } from './src/base/collection/Collection';\n\n// Boot\nexport { BaseApp } from './src/boot/app/App';\n\n// Common\nexport  *  from './src/common/utils/utilities';\n\n// Services\n\n","import { Vessel } from '@vessel/core';\n\nexport function route(routeName, routePath=undefined) {\n    return function(proto, name, descriptor) {\n        let metadata,\n            className = proto.getClassName(),\n            metadataManager = Vessel.prototype.container.get('@metadata_manager');\n\n        metadata = metadataManager.getMetadata(className, 'routes');\n\n        if (!metadata) {\n            metadata = {};\n        }\n\n        metadata[routeName] = {\n            path: routePath,\n            bound: descriptor.value,\n            context: proto\n        };\n\n        metadataManager.addMetadata(className, 'routes', metadata);\n    }\n}","import { Kernel } from '@vessel/core';\n\nexport function bootable(constructor: any) {\n    const app = new constructor();\n    new Kernel(app).boot();\n}","import { Vessel } from '@vessel/core';\n\n/**\n * Decorator: @attr\n *\n * Adds the names of the custom model attributes to\n * the metadata manager.\n *\n * This will be used by the framework so it knows what\n * are the model attributes.\n *\n * @param proto\n * @param attrName\n */\nexport function attr(proto, attrName) {\n    let metadataManager = Vessel.prototype.container.get('@metadata_manager'),\n        className = proto.getClassName();\n\n    metadataManager.setAttribute(className, attrName);\n}","import {isFunction} from \"@vessel/core\";\n/**\n * Decorator: @validate( <validate function> )\n *\n * Alters the original setter so each time\n * it is invoked it will proceed as follows:\n *\n *  1. Calls the built-in _validate function. This\n *  is a built-in framework function, responsible\n *  for general validation.\n *  2. The _validation function will delegate to\n *  the given validate function\n *  3. If the passed in validate function returns\n *  true it'll execute the setter.\n *  *3b. If the validate function results in false,\n *  The new value will not be setted.\n *\n * @param validationFn\n * @returns descriptor object\n */\nexport function validate(validationFn) {\n    return function(proto, setterName, descriptor) {\n        if ( !isFunction(validationFn) ) {\n            throw TypeError(\"The @validate() decorator, \" +\n                \"applied to '\" + setterName + \"()', requires a \" +\n                \"valid validator function as parameter to be \" +\n                \"passed in.\");\n        }\n\n        let boundFn = descriptor.value;\n        descriptor.value = function setAttribute(value) {\n            if ( this._validate(value, validationFn) ) {\n                boundFn.call(this, value);\n            }\n        };\n        return descriptor;\n    }\n}","import { Vessel } from '@vessel/core';\n/**\n * Decorator: @collection\n *\n * Adds the name of the custom collection attribute to\n * the metadata manager.\n *\n * This will be used by the framework so it knows\n * what is the collection array attribute which\n * will be used to store the models.\n *\n *\n * @param proto\n * @param attrName\n */\nexport function collection(proto: any, attrName: string){\n    let metadataManager = Vessel.prototype.container.get('@metadata_manager'),\n        className = proto.getClassName();\n\n    metadataManager.setCollection(className, attrName);\n}","import { Model as BaseModel } from '@vessel/core';\nimport { attr, validate } from '@vessel/decorators';\nimport { ModelInterface } from '@vessel/types';\n\nexport class TodoModel extends BaseModel implements ModelInterface {\n\n    @attr\n    public author;\n\n    @attr\n    public body;\n\n    @attr\n    public date;\n\n\n    getAuthor() {\n        return this.attr.author;\n    }\n\n    @validate(\n        function validateAuthor(value) {\n            if (!(value.length >= 3 && value.length <= 20) ) {\n                console.warn(\"Author length must be greater \" +\n                    \"than 3 characters or less than 20.\");\n                return false;\n            }\n            return true;\n        }\n    )\n    setAuthor(value) {\n        this.attr.author = value;\n    }\n\n    getBody() {\n        return this.attr.body;\n    }\n\n    @validate(\n        function validateBody(value) {\n            if (!(value.length >= 0 && value.length <= 120) ) {\n                throw TypeError(\"Body length must be less \" +\n                    \"than 120 characters and must not be empty.\");\n            }\n            return true;\n        }\n    )\n    setBody(value) {\n        this.attr.body = value;\n    }\n\n}","import { Collection as BaseCollection } from '@vessel/core';\nimport { collection } from '@vessel/decorators';\n\nimport { get } from '@vessel/injector';\n\nimport { TodoModel } from '../model/TodoModel';\n\n\nexport class TodoCollection extends BaseCollection {\n\n    @collection\n    public todos = [];\n\n    public model = TodoModel;\n\n    @get('collection.test')\n    public testCollection;\n\n}","import { Collection as BaseCollection } from '@vessel/core';\nimport { collection } from '@vessel/decorators';\n\nimport { get } from '@vessel/injector';\n\nimport { TodoModel } from '../model/TodoModel';\n\n\nexport class ThirdCollection extends BaseCollection {\n\n    @get('collection.fourth')\n    public fourthCollection;\n}","import { Collection as BaseCollection } from '@vessel/core';\n\nimport { get } from '@vessel/injector';\n\nexport class TestCollection extends BaseCollection {\n\n    @get('collection.third')\n    public thirdCollection;\n\n}","import { Collection as BaseCollection } from '@vessel/core';\nimport { collection } from '@vessel/decorators';\n\nimport { TodoModel } from '../model/TodoModel';\n\n\nexport class FourthCollection extends BaseCollection {\n\n    public test = \"test\";\n\n}","import { Controller as BaseController } from '@vessel/core';\n\nimport { route } from '@vessel/router';\nimport { get } from '@vessel/injector';\n\nexport class TodoController extends BaseController {\n\n    @get('collection.todos')\n    public collection;\n\n    public constructor() {\n        super();\n        console.log(this.get('collection.todos'));\n    }\n\n    @route('todo_index', '/')\n    public indexTodo() {\n\n    }\n\n    @route('todo_edit', '/edit/{id}')\n    public editTodo() {\n\n    }\n\n    @route('todo_create')\n    public createTodo() {\n\n    }\n\n}","import { TodoModel } from '../model/TodoModel';\nimport { TodoCollection } from '../collection/TodoCollection';\nimport {ThirdCollection} from \"../collection/ThirdCollection\";\nimport {TestCollection} from \"../collection/TestCollection\";\nimport {FourthCollection} from \"../collection/FourthCollection\";\nimport {TodoController} from \"../controller/TodoController\";\n\nexport const modules = {\n\n    models: {\n        'model.todo': TodoModel,\n    },\n\n    controllers: {\n        'controller.todo': TodoController\n    },\n\n    collections: {\n        'collection.todos': TodoCollection,\n        'collection.test': TestCollection,\n        'collection.third': ThirdCollection,\n        'collection.fourth': FourthCollection\n    },\n\n\n    views: {\n\n    }\n\n};","import { RouterBoot } from '@vessel/router';\n\nimport { modules } from './config/modules';\nimport { BaseApp } from '@vessel/core';\nimport { bootable } from '@vessel/decorators';\n\n\n@bootable\nclass App extends BaseApp {\n\n    public registerModules() {\n        return modules;\n\n    }\n\n    public registerPackages() {\n        return [\n            new RouterBoot()\n        ];\n    }\n\n    public getGlobalName() {\n        return '$App';\n    }\n\n}\n"],"names":["MetadataManager","Vessel","ContainerLoader","Kernel","Model","Controller","Collection","BaseApp","BaseModel","BaseCollection","BaseController"],"mappings":"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"}