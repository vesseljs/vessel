{"version":3,"file":"bundle.js","sources":["../node_modules/@vessel/common/utils/src/utilities.ts","../node_modules/@vessel/boot/src/app/app.ts","../node_modules/@vessel/core/src/base/model/proxy.ts","../node_modules/@vessel/core/src/base/model/model.ts","../node_modules/@vessel/core/src/base/collection/collection.ts","../node_modules/@vessel/common/decorators/src/attr.ts","../node_modules/@vessel/common/decorators/src/validate.ts","../node_modules/@vessel/common/decorators/src/collection.ts","../src/Model/TodoModel.ts","../src/Collections/TodoCollection.ts","../src/main.ts"],"sourcesContent":["export function getDate() {\n\tconsole.log('Get date!');\n}\n\nexport function checkDate() {\n\tconsole.log('checkDate!');\n}\n\nexport function isSupported( feature ) {\n\treturn typeof feature == 'function';\n}\n\nexport function isArray( arr ) {\n    return Array.isArray(arr);\n}\n\nexport function isArrayEmpty( arr ) {\n    return arr.length === 0\n}\n\nexport function findItem( arr, value ) {\n    return arr.indexOf(value) !== -1\n}\n\nexport function isFunction( fn ) {\n    if ( fn == undefined ) return false;\n    if ( typeof fn !== \"function\" ) return false;\n    return true;\n}\n\nexport function defineProp( obj, prop, getter, setter ) {\n    let descriptor = {\n        enumerable: false,\n        configurable: true,\n        set: setter,\n        get: getter\n    }\n    Object.defineProperty( obj, prop, descriptor );\n}","import { isSupported } from '../../../common/utils/src/utilities';\nimport { WindowInterface } from './interfaces';\n\nexport class App {\n\n\tpublic container;\n\n\tpublic browserBoot(): App {\n\t\t(<WindowInterface>window).$Vessel = this;\n\t\tthis.detectBrowserFeatures()\n\t\t\t.loadContainer();\n\t\treturn this;\n\t}\n\n\tprivate detectBrowserFeatures(): App {\n\t\t(<WindowInterface>window).$Vessel.can = {\n\t\t\tWeakMap: isSupported( (<any>window).WeakMap )\n\t\t}\n\t\treturn this;\n\t}\n\n\t// TODO - WeakMap fallback\n\tprivate loadContainer(): App {\n\t\t this.container =\n             (<WindowInterface>window).$Vessel.can.WeakMap ?\n                 new WeakMap() :\n                 \"Dev: WeakMap fallback - work in progress\";\n\t\treturn this;\n\t}\n}","import { defineProp } from '@vessel/common/utils/src/utilities';\n\nexport class AttribProxy {\n\n    public data = <any>{};\n\n    public addAttribute( name: string ) {\n        this.data[name] = \"\";\n        defineProp(this, name,\n            function getter() {\n                return this.data[name];\n            },\n            function setter( value ) {\n                this.data[name] = value;\n            }\n        )\n    }\n\n}","import { AttribProxy } from './proxy';\nimport { ModelInterface } from '../interfaces';\nimport { isArrayEmpty } from '@vessel/common/utils/src/utilities';\n\nexport class Model implements ModelInterface {\n\n    public __metadata__;\n    protected attr: any;\n\n    public constructor() {\n        this._createProxy();\n    }\n\n    // TODO - Validation in set\n    public set( attribs ) {\n        for (let attrib in attribs) {\n            this.attr[attrib] = attribs[attrib];\n        }\n    }\n\n    protected _createProxy() {\n        if ( isArrayEmpty(this.__metadata__) )\n            throw TypeError(\"Attempt to create a proxy\" +\n                \" with no metadata.\");\n\n        this.attr = new AttribProxy();\n        for (let attrName of this.__metadata__) {\n            this.attr.addAttribute(attrName);\n        }\n    }\n\n    protected _validate( value, validationFn ) {\n        return validationFn(value);\n    }\n\n    private _getClassName(): string {\n        return this.constructor.name;\n    }\n\n}\n\n// Metadata needs to be directly declared\n// so it already exists in the prototype\n// when the decorator runs.\nModel.prototype.__metadata__ = [];","import { isArray } from \"@vessel/common/utils\";\n\nexport abstract class Collection {\n\n    public __metadata__: string;\n\n    public constructor() {\n    }\n\n    public add(...args) {\n        let collection = this.getCollection(),\n            Model = this.getModel();\n\n        try {\n            collection.push(new Model(...args));\n        } catch(e) {\n            if (e instanceof TypeError) {\n                if ( !isArray(collection) ) {\n                    console.error(\"TypeError: The collection '\" +\n                        this.__metadata__ + \"' (\" + typeof collection +\n                        \")must be an array.\");\n                }\n            }\n        }\n    }\n\n    public find() {\n\n    }\n\n    public findOne() {\n\n    }\n\n    public findById() {\n\n    }\n\n    public sort() {\n\n    }\n\n    public remove() {\n\n    }\n\n    public removeById() {\n\n    }\n\n    public update() {\n\n    }\n\n    public save() {\n\n    }\n\n    public fetch() {\n\n    }\n\n    protected willRetrieve() {\n        return this;\n    }\n\n    private getCollection() {\n        let collection = this[this.__metadata__];\n        return collection;\n    }\n\n    abstract getModel();\n}","export function attr(proto, attribName) {\n    proto.__metadata__.push(attribName);\n}","import { isFunction } from \"@vessel/common/utils\";\n\nexport function validate(validationFn ) {\n    return function(proto, setterName, descriptor) {\n        if ( !isFunction(validationFn) ) {\n            throw TypeError(\"The @validate() decorator, \" +\n                \"applied to '\" + setterName + \"()', requires a \" +\n                \"valid validator function as parameter to be \" +\n                \"passed in.\");\n        }\n\n        let boundFn = descriptor.value;\n        descriptor.value = function setAttribute(value) {\n            if ( this._validate(value, validationFn) ) {\n                boundFn.call(this, value);\n            }\n        }\n        return descriptor;\n    }\n}","export function collection(proto, attribName) {\n    proto.__metadata__ = attribName;\n}","import { Model as BaseModel } from '@vessel/core';\nimport { attr, validate } from '@vessel/common/decorators';\nimport {ModelInterface} from \"../../../../dist/@vessel/core/src/base/interfaces\";\n\nexport class TodoModel extends BaseModel implements ModelInterface{\n\n    @attr\n    public author;\n\n    @attr\n    public body;\n\n    @attr\n    public date;\n\n    constructor(author, body ) {\n        super();\n        this.setAuthor( author );\n        this.setBody( body );\n    }\n\n    getAuthor() {\n        return this.attr.author;\n    }\n\n    @validate(\n        function validateAuthor(value) {\n            if (!(value.length >= 3 && value.length <= 20) ) {\n                console.warn(\"Author length must be greater \" +\n                    \"than 3 characters or less than 20.\");\n                return false;\n            }\n            return true;\n        }\n    )\n    setAuthor(value) {\n        this.attr.author = value;\n    }\n\n    getBody() {\n        return this.attr.body;\n    }\n\n    @validate(\n        function(value) {\n            if (!(value.length >= 0 && value.length <= 120) ) {\n                throw TypeError(\"Body length must be less \" +\n                    \"than 120 characters and must not be empty.\");\n            }\n            return true;\n        }\n    )\n    setBody(value) {\n        this.attr.body = value;\n    }\n\n}","import { Collection as BaseCollection } from '@vessel/core';\nimport { collection } from '@vessel/common/decorators';\n\nimport { TodoModel } from '../Model/TodoModel';\nimport {ModelInterface} from \"../../../../packages/core/src/base/interfaces\";\n\n//inject()\nexport class TodoCollection extends BaseCollection {\n\n    @collection\n    public todos;\n\n\n    constructor() {\n        super();\n    }\n\n    public getModel(): ModelInterface {\n        return TodoModel;\n    }\n}","import { App } from '@vessel/boot';\nimport { TodoModel } from './Model/TodoModel';\nimport { TodoCollection } from './Collections/TodoCollection';\n\nconst app: any = new App().browserBoot();\napp.x = new TodoModel('pe', 'body 1');\napp.y = new TodoModel('alex', 'body 2');\n\napp.collection = new TodoCollection();\napp.collection.add('pedro!', 'body 1');"],"names":["BaseModel","BaseCollection"],"mappings":"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"}